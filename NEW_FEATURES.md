# 🎙️ 新版播客生成器使用指南

## ✨ 新特性：两步式生成流程

为了给用户更好的控制体验，我们重新设计了播客生成流程：

### 🔄 **新流程 vs 旧流程**

**旧流程**（一步式）：
输入主题 → 直接生成音频 （用户无法查看和修改脚本）

**新流程**（两步式）：
输入主题 → **生成脚本预览** → 用户确认/修改 → **语音合成**

## 🎯 **为什么要改进？**

1. **内容可控性**：用户可以查看AI生成的脚本内容
2. **编辑能力**：支持手动修改脚本内容
3. **错误预防**：避免生成不满意的音频浪费时间
4. **更好体验**：分步操作，每一步都有明确反馈

## 🚀 **使用新版播客生成器**

### 访问方式
- **新版页面**：http://localhost:3002/new-podcast.html （推荐）
- **原版页面**：http://localhost:3002/podcast.html （仍可使用）

### 第一步：生成脚本
1. 输入播客主题
2. 选择是否使用AI生成（需配置OpenRouter API Key）
3. 设置播客风格、时长、段落数
4. 点击"生成脚本"
5. 查看生成的脚本内容
6. 可以编辑修改脚本内容
7. 点击"下一步：合成音频"

### 第二步：合成音频
1. 设置语音参数（音色、语速、音量）
2. 点击"合成音频"
3. 等待音频生成完成
4. 下载音频文件和脚本文件

## 🤖 **AI功能配置**

### 获取OpenRouter API Key
1. 访问 https://openrouter.ai
2. 注册账号并登录
3. 在Dashboard中获取API Key

### 配置环境变量
在 `.env` 文件中设置：
```env
OPENROUTER_API_KEY=你的实际API密钥
OPENROUTER_MODEL=qwen/qwen3-32b:free
```

### 支持的模型
- `qwen/qwen3-32b:free` - 通义千问3（免费，推荐）
- `meta-llama/llama-3.1-8b-instruct:free` - Llama 3.1（免费）
- `openai/gpt-3.5-turbo` - ChatGPT 3.5（付费）
- `anthropic/claude-3-haiku` - Claude 3（付费）

## 📊 **功能对比**

| 功能 | 新版（两步式） | 原版（一步式） |
|------|---------------|---------------|
| AI内容生成 | ✅ 支持 | ✅ 支持 |
| 脚本预览 | ✅ 支持 | ❌ 不支持 |
| 脚本编辑 | ✅ 支持 | ❌ 不支持 |
| 分步操作 | ✅ 支持 | ❌ 不支持 |
| 批量生成 | ⏳ 计划中 | ✅ 支持 |
| 历史记录 | ⏳ 计划中 | ✅ 支持 |

## 🛠️ **API接口**

### 生成脚本
```bash
POST /api/podcast/generate-script
```

**请求参数：**
```json
{
  "topic": "人工智能的发展趋势",
  "style": "conversational",
  "duration": "medium",
  "segments": 3,
  "useAI": true
}
```

**响应示例：**
```json
{
  "success": true,
  "message": "脚本生成成功！",
  "data": {
    "script": "播客完整脚本内容...",
    "metadata": {
      "topic": "人工智能的发展趋势",
      "generatedBy": "openrouter",
      "model": "qwen/qwen3-32b:free",
      "estimatedLength": "约5分钟"
    }
  }
}
```

### 合成音频
```bash
POST /api/podcast/synthesize-audio
```

**请求参数：**
```json
{
  "script": "播客脚本内容...",
  "topic": "人工智能的发展趋势",
  "voiceType": "zh_female_linjia_mars_bigtts",
  "speedRatio": 1.0,
  "volumeRatio": 1.0
}
```

## 🎭 **AI生成内容示例**

### 主题：人工智能的发展
**AI生成的脚本预览：**

> 嘿！亲爱的听众朋友们，欢迎来到我们的'科技茶水间'！我是你们的老朋友小林，今天咱们不聊八卦，来唠唠最近全网都在讨论的'人工智能热'。你有没有想过，从下棋的AlphaGo到会写诗的AI，这些神奇的技术到底是怎么一步步发展到今天的？
> 
> **第1部分：从科幻到现实：人工智能的'成长史'**
> 
> 1956年达特茅斯会议简直是AI界的'出生证明'！科学家们当时天真地认为5年内就能做出'人工智慧'，结果50年过去了，AI还在'蹒跚学步'...

**模板生成 vs AI生成的区别：**
- **模板生成**：结构化，通用性内容，适合快速生成
- **AI生成**：个性化，针对性内容，更自然流畅

## 🔧 **技术架构**

```
新版播客生成系统
├── 前端交互 (new-podcast.html)
│   ├── 第一步：脚本生成界面
│   ├── 第二步：音频合成界面
│   └── 实时状态反馈
├── 后端API
│   ├── /api/podcast/generate-script
│   ├── /api/podcast/synthesize-audio
│   └── /download/:type/:filename
└── AI集成
    ├── OpenRouter客户端
    ├── 模板生成备用
    └── 错误处理与回退
```

## 🎉 **优势总结**

1. **🎯 精确控制**：每一步都可以查看和调整
2. **📝 内容透明**：脚本内容完全可见
3. **✏️ 灵活编辑**：支持手动优化脚本
4. **🚫 避免浪费**：避免生成不满意的音频
5. **📊 更好反馈**：每个步骤都有明确状态提示

---

**现在就试试新版播客生成器吧！** 🎉

访问：http://localhost:3002/new-podcast.html
